<!DOCTYPE html>
<html>

<head>
</head>

<body>
    <script type="module">
        import init, { wps_to_path, optimize } from "./wayfinder_wasm.js";
        var path_param = { max_dx: 1.0, max_dy: 1.0, max_dt: 5.0 };
        var opt_param = {
            eps: 1e-2,
            samples: 10,
            max_iters: 10,
            target_cost: 0.0
        };
        var wps = [
                { point: [0, 0], tangent: [10, 0], curvature: [0, 0] }, 
                { point: [10, 10], tangent: [0, 10], curvature: [0, 0] }, 
                { point: [20, 20], tangent: [10, 0], curvature: [0, 0] }, 
                { point: [30, 30], tangent: [0, 10], curvature: [0, 0] }];

        var timeit = function(f) {
            var t = performance.now();
            var res = f();
            var dt = performance.now() - t;
            console.log(dt);
            return res;
        }

        init().then(init => {
            timeit(() => console.log(wps_to_path(wps, path_param)));
            timeit(() => console.log(optimize(wps, opt_param)));
        });

    </script>
</body>

</html>